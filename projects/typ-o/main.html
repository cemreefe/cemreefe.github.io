<html>
<!-- bruh. -->
<head>
  <title>тйп-0 | Cyrillic Typing Practice</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="icon"
      type="image/png"
      href="favico.png">
</head>
<!-- The information between the BODY and /BODY tags is displayed.-->
<body>
  <div id="bodyWrapper">
    <img src="typ-o.png" alt="typ-o cyrillic typing practice" id="banner">
    <h1>Cyrillic typing practice</h1>

    <div id="keyboard">
      <table>
        <tr id="row1">
          <td>
            <div class="keyWrapper" id="kw1"></div>
          </td>
        </tr>
        <tr id="row2">
          <td>
            <div class="keyWrapper" id="kw2"></div>
          </td>
        </tr>
        <tr id="row3">
          <td>
            <div class="keyWrapper" id="kw3"></div>
          </td>
        </tr>
        <tr id="row4">
          <td>
            <div class="keyWrapper" id="kw4"></div>
          </td>
        </tr>
      </table>
    </div>

    <br>
    <p id="deneme"></p>
    <textarea id="txtArea" rows="6" cols="50"> █</textarea>

    <p>Created for fun on a friday night for fun, check out the <a href="page2.html">git</a> to view or fork freely.
    </p>

    <hr>

    <ul>
    <li>No strings attached!</li>
    <li>Just for fun and practice, not meant to be used as a virtual keyboard.</li>
    </ul>

    <p>&#169; <a href="https://blog.cemre.in" target="_blank">Cemre Efe Karakaş</a>, 2020</p>

  </div>


  <!-- SCRIPT -->
  <script type="text/javascript">
    keys = [
      'Ё1234567890-='.split(''),
      'ЙЦУКЕНГШЩЗХЪ\\'.split(''),
      'ФЫВАПРОЛДЖЭ'.split(''),
      'ЯЧСМИТЬБЮ.'.split(''),
    ]
    shift = [
      'Ё!"№;%:?*()_+'.split(''),
      'ЙЦУКЕНГШЩЗХЪ/'.split(''),
      'ФЫВАПРОЛДЖЭ'.split(''),
      'ЯЧСМИТЬБЮ,'.split(''),
    ]
    codes = [
      [222,49,50,51,52,53,54,55,56,57,48,189,18900,],
      [81,87,69,82,84,89,85,186,79,80,221,22100,188,],
      [65,83,68,70,71,72,74,75,76,18600,73,],
      [90,88,67,86,66,78,77,18800,190,191,],
    ]
    keyDic = {
      222:"ё",
      49:"1",
      50:"2",
      51:"3",
      52:"4",
      53:"5",
      54:"6",
      55:"7",
      56:"8",
      57:"9",
      48:"0",
      189:"-",
      18900:"=", //cau

      81:"й",
      87:"ц",
      69:"у",
      82:"к",
      84:"е",
      89:"н",
      85:"г",
      186:"ш",
      79:"щ",
      80:"з",
      221:"х",
      22100:"ъ", //cau
      188:"\\",

      65:"ф",
      83:"ы",
      68:"в",
      70:"а",
      71:"п",
      72:"р",
      74:"о",
      75:"л",
      76:"д",
      18600:"ж", //cau
      73:"э",

      90:"я",
      88:"ч",
      67:"с",
      86:"м",
      66:"и",
      78:"т",
      77:"ь",
      18800:"б", //cau
      190:"ю",
      191:".",
    }

    shiftDic = {
      222:"Ё",
      49:"!",
      50:"\"",
      51:"№",
      52:";",
      53:"%",
      54:":",
      55:"?",
      56:"*",
      57:"(",
      48:")",
      189:"_",
      18900:"+", //cau

      81:"Й",
      87:"Ц",
      69:"У",
      82:"К",
      84:"Е",
      89:"Н",
      85:"Г",
      186:"Ш",
      79:"Щ",
      80:"З",
      221:"Х",
      22100:"Ъ", //cau
      188:"/",

      65:"Ф",
      83:"Ы",
      68:"В",
      70:"А",
      71:"П",
      72:"Р",
      74:"О",
      75:"Л",
      76:"Д",
      18600:"Ж", //cau
      73:"Э",

      90:"Я",
      88:"Ч",
      67:"С",
      86:"М",
      66:"И",
      78:"Т",
      77:"Ь",
      18800:"Б", //cau
      190:"Ю",
      191:",",
    }

    // A $( document ).ready() block.
    $( document ).ready(function() {
        console.log( "ready!" );

        function fillKeyboard(keys) {
          $('.kbb').remove();
          for(i=0; i<4; i++){
            for(j=0; j<keys[i].length; j++){
              var b = document.createElement('button');
              $(b).addClass('kbb')
                .html(keys[i][j])
                .attr('id', codes[i][j].toString())
                .appendTo($('#kw'+(i+1)));
            }
          }
        }

        fillKeyboard(keys);

        console.log( "done!" );

        function cyrillize(code, shift) {
          if (shift) {
            return(shiftDic[code]);
          } else {
            return(keyDic[code]);
          }
        }

        var area = $('#txtArea');
        var shiftDown = false;
        area.keydown(function(e){

          kCode = e.keyCode;

          if (kCode > 123 || kCode < 112) {
              e.preventDefault();
          }

          if (kCode == 16) {
            shiftDown = true;
            fillKeyboard(shift);
          }

          if (kCode == 189) {
            if (e.code == 'Equal') {
              kCode *= 100;
            }
          } else if (kCode == 221) {
            if (e.code == 'BracketRight') {
              kCode *= 100;
            }
          } else if (kCode == 188) {
            if (e.code == 'Comma') {
              kCode *= 100;
            }
          } else if (kCode == 186) {
            if (e.code == 'Semicolon') {
              kCode *= 100;
            }
          }

          if ( !(e.key != null && e.key === 'Unidentified') ) {
            console.log(kCode);
            $('#' + kCode.toString()).css('background-color', 'var(--hover-color)');
            //area.value = cyrillize(area.value);
            $("#txtArea").text($("#txtArea").text().slice(0, -2));
            if (kCode == 8) {
              $("#txtArea").text($("#txtArea").text().slice(0, -1));
            } else if (kCode == 32) {
              $("#txtArea").text($("#txtArea").text() + " ");
            } else {
              $('#txtArea').append(cyrillize(kCode, shiftDown));
            }
            $("#txtArea").text($("#txtArea").text() + " █");


          }
        });

        area.keyup(function(e){

          $('.kbb').css('background-color', '#ffffff44');

          if (e.keyCode == 16) {
            shiftDown = false;
            fillKeyboard(keys);
          }
          if (kCode == 189) {
            if (e.code == 'Equal') {
              kCode *= 100;
            }
          } else if (kCode == 221) {
            if (e.code == 'BracketRight') {
              kCode *= 100;
            }
          } else if (kCode == 188) {
            if (e.code == 'Comma') {
              kCode *= 100;
            }
          } else if (kCode == 186) {
            if (e.code == 'Semicolon') {
              kCode *= 100;
            }
          }
          if ( !(e.key != null && e.key === 'Unidentified') ) {
            $('#' + kCode.toString()).css('background-color', '#ffffff44');
            //area.value = cyrillize(area.value);
          }
        });


    });
  </script>

</body>
</html>
