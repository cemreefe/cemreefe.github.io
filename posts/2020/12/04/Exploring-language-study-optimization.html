<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cemrekarakas.com/static/css/theme.css">
    <link rel="icon" type="image/png" href="https://emoji.dutl.uk/png/64x64/üå†.png">
    <title>Exploring Language study Optimization - Cemre's Blog</title>
    
    <meta property="og:title" name="title" content="Exploring Language study Optimization" />
    <meta property="og:image" name="image" content="https://cemrekarakas.com/static/img/default_img.png" />
    <meta property="og:description" name="description" content="Coursemaker is program to parse sentences in a corpus, and sort them in an order ideal for vocabulary study. See github repo for the complete source code." />
    <meta property="og:type" content="website" />
    <meta property="og:url" name="url" content="https://cemrekarakas.com/posts/2020/12/04/Exploring-language-study-optimization">
    <meta property="twitter:title" name="title" content="Exploring Language study Optimization" />
    <meta property="twitter:image" name="image" content="https://cemrekarakas.com/static/img/default_img.png" />
    <link rel="canonical" href="https://cemrekarakas.com/posts/2020/12/04/Exploring-language-study-optimization" />
    <meta property="og:pubdate" name="pubdate" content="Fri, 04 Dec 2020 00:00:00 +0000" />

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D53MYFV2RS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-D53MYFV2RS');
</script>
<script>
  // Function to handle the click event on headers.
  function handleClick(event) {
      // Get the element's ID.
      const id = this.id;

      // Define the base URL.
      const baseUrl = window.location.href.split('#')[0];

      // Construct the URL with ID.
      const urlWithId = baseUrl + '#' + id;

      // Create a temporary text area element to facilitate copying to the clipboard.
      const textArea = document.createElement('textarea');
      textArea.value = urlWithId;
      document.body.appendChild(textArea);

      // Select and copy the URL with ID to the clipboard.
      textArea.select();
      document.execCommand('copy');

      // Remove the temporary text area element.
      document.body.removeChild(textArea);

      alert("Link copied to clipboard.");
  }

  // Add a DOMContentLoaded event listener to run the code when the document is ready.
  document.addEventListener('DOMContentLoaded', function() {
      // Add a click event listener to the specified header elements (h2, h3, h4).
      document.querySelectorAll('h2, h3, h4').forEach(function(header) {
          header.addEventListener('click', handleClick);
      });
  });
</script>

<p><meta name="twitter:card" content="summary_large_image"/>
<meta content='@cemreefe' name='twitter:site'/>
<meta content='@cemreefe' name='twitter:creator'/></p>
<script>
    // temporary script for applying custom styles
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    function switchStylesheet(newHref) {
        // Get all current link elements in the head
        const links = document.querySelectorAll('link[rel=stylesheet]');

        // Loop through the link elements and remove them
        links.forEach(link => {
            link.parentNode.removeChild(link);
        });

        // Create a new link element for the new stylesheet
        const newLink = document.createElement('link');
        newLink.rel = 'stylesheet';
        newLink.href = newHref;

        // Append the new link element to the head
        document.head.appendChild(newLink);
    }

    function addStyleParamToLinks(style) {
        const links = document.querySelectorAll('a[href]');
        links.forEach(link => {
            const url = new URL(link.href);
            url.searchParams.set('style', style);
            link.href = url.toString();
        });
    }

    // On page load, check for the 'style' query parameter and apply style
    window.addEventListener('DOMContentLoaded', () => {
        const style = getQueryParam('style');
        if (style) {
            const stylesheetHref = `/static/css/${style}.css`;
            switchStylesheet(stylesheetHref);
            addStyleParamToLinks(style);
        }
    });
</script>
  </head>
  <body>
    <div class="wrapper">
      <div class="content">
        <nav>
          <h3 id="cemre-efe-karakas">Cemre Efe Karakas</h3>
<p><a href="/">About</a>
<a href="/blog">Blog</a>
<a href="/contact">Contact</a>
<a href="/archive">Archive</a>
<a href="/search">üîç</a></p>
<hr />
        </nav>
      </div>
      <div class="content">
        <main>
          
          <div class="categoryTag">
            data science
          </div>
          
          <div class="categoryTag">
            language learning
          </div>
          
          <div class="categoryTag">
            languages
          </div>
          
          <div class="categoryTag">
            coding
          </div>
          
          <div class="categoryTag">
            EDA
          </div>
          
          <h1 id="exploring-language-study-optimization">Exploring Language study Optimization</h1>
<p>Coursemaker is program to parse sentences in a corpus, and sort them in an order ideal for vocabulary study. See <a href="https://github.com/cemreefe/coursemaker">github repo</a> for the complete source code.</p>
<h3 id="the-idea">The idea</h3>
<p><img alt="number of known most used words versus their cumulative usage percentage in the whole corpus. credit: @thevenuehouse on reddit" src="https://github.com/cemreefe/coursemaker/raw/main/media/graph.png"/></p>
<p>Most used 100 words in a language make up approximately 50% of words in a corpus (This of course varies from language to language. E.g. it is lover in agglutinative languages). If you sort the most used words and start learning words from this list (frequency sorted list <code>fsl</code>) you can effectively increase your hit rate in the corpus. </p>
<p>I want to sort sentences in a similar manner. The first sentence of the proposed order shall ideally contain the first n words in the <code>fsl</code>. Any sentence can contain any number of words from previous sentences, and tries to incorporate any number of next m most used words.</p>
<p>The 'vocabulary expansion per words studied' curve  is ideally the same as the curve given above and it can theoretically (and practically) never exceed this curve. To achieve this, no <code>m</code>th sentence shall use the <code>n+1</code>th word in the sorted list if the first <code>m</code> sentences don't contain any of the first <code>n</code> words.</p>
<h3 id="data-analysis">Data analysis</h3>
<p>I chose <code>A Tale of Two Cities</code>  as a corpora while conducting my experiments. I normalized the corpus and divided it into sentences. I extracted 7481 sentences, which contain 9940 unique words.  All words are counted and sorted according to their frequencies/counts.</p>
<p>The <code>preprocess_corpus.py</code>  script extracts sentences from a corpus and saves them in a CSV format in their original order. It also saves the words and their counts as a CSV file.  </p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code><span style="color: #bbbbbb">      </span><span style="color: #666666">-</span><span style="color: #19177C">i</span>:<span style="color: #bbbbbb">   </span><span style="color: #19177C">input</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">text</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">file</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">containing</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">the</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">corpus</span>
<span style="color: #bbbbbb">      </span><span style="color: #666666">-</span><span style="color: #19177C">o</span>:<span style="color: #bbbbbb">   </span><span style="color: #19177C">output</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">csv</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">file</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">for</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">sentences</span>
<span style="color: #bbbbbb">      </span><span style="color: #666666">-</span><span style="color: #19177C">s</span>:<span style="color: #bbbbbb">   </span><span style="color: #19177C">(optional)</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">the</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">starting</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">string</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">for</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">the</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">corpus</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">in</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">the</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">file</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">(to</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">skip</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">through</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">some</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">initial</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">parts)</span>
<span style="color: #bbbbbb">      </span><span style="color: #666666">-</span><span style="color: #19177C">a</span>:<span style="color: #bbbbbb">   </span><span style="color: #19177C">(optional)</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">alphabet</span>,<span style="color: #bbbbbb"> </span><span style="color: #19177C">default</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">'latin'</span>,<span style="color: #bbbbbb"> </span><span style="color: #19177C">supports</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">'cyrillic'</span>.
<span style="color: #bbbbbb">      </span><span style="color: #666666">-</span><span style="color: #19177C">stm</span>:<span style="color: #bbbbbb"> </span><span style="color: #19177C">(optional)</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">apply</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">stemming</span><span style="color: #bbbbbb"> </span><span style="color: #008000; font-weight: bold">while</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">processing</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">tokens</span>.<span style="color: #bbbbbb"> </span><span style="color: #19177C">Supports</span><span style="color: #bbbbbb"> </span><span style="color: #BA2121">'ru'</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">(Russian)</span>.
<span style="color: #bbbbbb">      </span><span style="color: #666666">-</span><span style="color: #19177C">ptc</span>:<span style="color: #bbbbbb"> </span><span style="color: #19177C">(optional)</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">pre</span><span style="color: #666666">-</span><span style="color: #19177C">tokenization</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">replace</span>.<span style="color: #bbbbbb"> </span><span style="color: #19177C">to</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">replace</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">certain</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">substrings</span><span style="color: #bbbbbb"> </span>
<span style="color: #bbbbbb">              </span><span style="color: #666666">&gt;</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">example</span>:<span style="color: #bbbbbb"> </span><span style="color: #BA2121">"[('mr.', 'mr'),('mrs.', 'mrs')]"</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">to</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">avoid</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">sentence</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">separation</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">on</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">the</span><span style="color: #bbbbbb"> </span><span style="color: #19177C">dots</span>.
</code></pre></div>
<p>i.e.:
<code>python3 preprocess_corpus.py -i data/corpus/ru_books.corpus -o data/csv/ru_books -stm ru</code></p>
<h3 id="sorting-the-sentences">Sorting the sentences</h3>
<p>I tried out many different approaches, out of which I found one to converge with the ideal learning curve. </p>
<h4 id="the-algorithm">The algorithm</h4>
<ol>
<li>Using <code>sort_sentences.py</code>, we make a copy of the sentences and the dictionary. </li>
<li>For every sentence, we compute the following: Average frequency of unique words in the sentence, which are also in the dictionary. </li>
</ol>
<p>After we find the sentence with the maximum average return, we discard that sentence from our sentence list, and we discard every word used in the sentence from our dictionary. We then continue to the next step where we do it all over again with the current sentences and dictionary. </p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>      -is:  <span style="font-weight: bold">*(--input_sentences) input csv file containing sentences</span>
<span style="font-weight: bold">      -if:  *</span>(--input_frequencies) input csv file containing frequencies
      -o:   <span style="font-weight: bold">*(--out) output csv file for sorted sentences</span>
<span style="font-weight: bold">      -col:  (--sentence_column) name of the column containing sentences in -is (def. 'sentence')</span>
<span style="font-weight: bold">      -sc:   (--sentence_count) number of sentences to return, default (-1 for max, 20 default)</span>
<span style="font-weight: bold">      -csl:  (--consider_n_sentences) number of considered sentences in the corpus</span>
<span style="font-weight: bold">      -msl:  (--min_sentence_length) minimum sentence length for consideration</span>
<span style="font-weight: bold">      -d:    (--dictionary) dictionary file, if not used, translations won't be written</span>
<span style="font-weight: bold">             expected cols: 'word', 'translation'</span>
<span style="font-weight: bold">      -s:    (--stemming) stemming language, default none, available: ru</span>

<span style="font-weight: bold">      *</span>: required
</code></pre></div>
<p>i.e.:
<code>python3 sort_sentences.py -is data/csv/ru_books.csv -if data/csv/ru_books_freqs.csv -o out/ru_books -sc 1000 -s ru</code> </p>
<p>Yields 100 best sentences to maximize vocabulary coverage with the minimum number of words learned.</p>
<h4 id="results">Results</h4>
<p>We have successfully found the best order of sentences to converge with the ideal vocabulary expansion curve.</p>
<p><img alt="" src="https://github.com/cemreefe/coursemaker/raw/main/media/vcc_comparison.png"/></p>
<h3 id="additional-options">Additional options</h3>
<p><code>CourseMaker</code> gives the user the opportunity to make use of</p>
<ol>
<li>A stemming script/program to only take into account stems as tokens, to render the vocabulary acquisition process more more useful.</li>
</ol>
<p>Currently, stemming support is only available for Russian</p>
<ol>
<li>a CSV dictionary to include meanings of the vocab points in given sentences.</li>
</ol>
<h3 id="application-areas">Application areas</h3>
<p>I had this idea while thinking about automating the task of creating a language course. While this idea does not take into consideration the following factors:</p>
<ul>
<li>Grammar</li>
<li>Topic-Attentive Ordering (Separation into units)</li>
</ul>
<p>It provides a good baseline for future work.</p>
<h3 id="we-could-make-a-course-out-of-this">We could make a course out of this!</h3>
<p>So we will do just that. For now, <code>coursemaker</code> courses give no grammar explanation, or give no translation for the target sentence. However, using our scripts' capabilities to the maximum we can get a somewhat decent course material.</p>
<p>Let's run <code>formatter.py</code> with the following command:</p>
<p><code>python3 formatter.py -i out/ru_books.csv -l russian -f html</code></p>
<p>Keep in mind that formatter takes these arguments:</p>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%;"><span></span><code>     -i:    <span style="font-weight: bold">*(--input) input csv file containing sentences</span>
<span style="font-weight: bold">     -l:    *</span>(--language) name of the corpus's language
     -o:     (--output) path for formatted output file
     -f:     (--format) output format (default: 'md')
<span style="color: #008000; font-weight: bold">              &gt; </span><span style="font-style: italic">available: 'md', 'html'</span>
<span style="color: #008000; font-weight: bold">              &gt; </span><span style="font-style: italic">future work: 'latex'</span>

     *: required
</code></pre></div>
<p>We will get a page similar to the following, in a printable <code>html</code> file.</p>
<p><img alt="" src="https://github.com/cemreefe/coursemaker/raw/main/media/example_html.png"/></p>
<p>You can check out <a href="https://github.com/cemreefe/coursemaker/blob/main/courses/russian_course.md">this example markdown output</a>.</p>
<h3 id="future-work">Future work</h3>
<p>Currently, my first priority will be <strong>sentence translations</strong>. Translations of whole sentences would be a nice addition to this project to provide a more complete learning experience. I'm planning to use the Google Translate workaround method from another project I made a year ago. </p>
<h3 id="references">References</h3>
<ol>
<li><a href="https://github.com/Badestrand/russian-dictionary">Badestrand/russian-dictionary</a></li>
<li><a href="https://github.com/SumUp4U/stemmer">SumUp4U/stemmer</a></li>
<li>@thevenuehouse (reddit)</li>
</ol>
<p>Reply on
- <a href="mailto:cemrekr@aol.com">email</a>
- <a href="https://mastodon.social/@cemre">mastodon</a></p>
<div class="commentbox"></div>
<script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>
<script>commentBox('5631895295492096-proj')</script>
<div onclick="{window.open('https://twitter.com/intent/tweet?url=Check out this \''+ document.getElementsByTagName('h1')[0].innerHTML +'\' article on Cemre\'s Blog: '+window.location.href, '_blank');}" style="
    position: fixed;
    bottom: 0;
    right: 1em;
    cursor: pointer;">
<img alt="Share to Twitter" src="https://cemrekarakas.com/static/img/twitter-100.png" style="width: 5em;"/>
</div>
        </main>
      </div>
      <footer>
        <p>2023 - Created with <a href="https://github.com/cemreefe/SimplyMarkdown">SimplyMarkdown</a></p>
<script>
  document.addEventListener('DOMContentLoaded', function() {
      // Get the current page's URL
      var currentPageURL = window.location.href;

      // Select all anchor elements on the page
      var links = document.querySelectorAll('a');

      // Loop through each link
      links.forEach(function(link) {
          // Check if the href of the link matches the current page's URL
          if (link.href === currentPageURL) {
              // Change the color of the link to red
              link.style.color = 'red';
          }
      });
  });
</script>
      </footer>
    </div>
  </body>
</html>